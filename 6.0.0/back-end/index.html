<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Back end AngularJS - Openveo Plugin Generator</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Back end AngularJS";
    var mkdocs_page_input_path = "back-end.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Openveo Plugin Generator</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">INTRODUCTION</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">PLUGIN DEVELOPERS</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../prerequisites/">Prerequisites</a>
                </li>
                <li class="">
                    
    <a class="" href="../getting-started/">Getting started</a>
                </li>
                <li class="">
                    
    <a class="" href="../structure/">Plugin structure</a>
                </li>
                <li class="">
                    
    <a class="" href="../plugin-life-cycle/">Plugin life cycle</a>
                </li>
                <li class="">
                    
    <a class="" href="../hooks/">Hooks</a>
                </li>
                <li class="">
                    
    <a class="" href="../template-engine/">Template engine</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Back end AngularJS</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#introduction">Introduction</a></li>
    

    <li class="toctree-l3"><a href="#add-a-back-end-page">Add a back end page</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#configure-back-end-menu">Configure back end menu</a></li>
        
            <li><a class="toctree-l4" href="#add-an-angularjs-back-end-route">Add an AngularJS back end route</a></li>
        
            <li><a class="toctree-l4" href="#add-back-end-page-controller">Add back end page controller</a></li>
        
            <li><a class="toctree-l4" href="#add-back-end-page-template">Add back end page template</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../tutorial/">Tutorial</a>
                </li>
                <li class="">
                    
    <a class="" href="../conf/">conf.js</a>
                </li>
                <li class="">
                    
    <a class="" href="../logger/">Logger</a>
                </li>
                <li class="">
                    
    <a class="" href="../i18n/">I18N and I10N</a>
                </li>
                <li class="">
                    
    <a class="" href="../compilation/">CSS / SASS / JS compilation</a>
                </li>
                <li class="">
                    
    <a class="" href="../coding-standards/">Coding standards</a>
                </li>
                <li class="">
                    
    <a class="" href="../unit-tests/">Unit tests</a>
                </li>
                <li class="">
                    
    <a class="" href="../end-to-end-tests/">End to end tests</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Openveo Plugin Generator</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>PLUGIN DEVELOPERS &raquo;</li>
        
      
    
    <li>Back end AngularJS</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/veo-labs/openveo-plugin-generator/edit/master/docs/back-end.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="introduction">Introduction</h1>
<p>OpenVeo back end is an <a href="https://angularjs.org/">AngularJS</a> single page application served on <strong>/be</strong>. That's why OpenVeo Plugins must write their back end pages using AngularJS whereas there is no restriction on front end pages implementation.</p>
<p>As you can see in the generated plugin, an AngularJS module is already written, thus all you have to do is to write new routes and implement your custom back end pages. OpenVeo core offers some features as factories, services, filters and directives that you can use to ease your plugin's development. See <a href="https://github.com/veo-labs/openveo-core">OpenVeo core documentation</a> for more details.</p>
<h1 id="add-a-back-end-page">Add a back end page</h1>
<p>Let's pretend we want to add a new back end page to a <strong>library</strong> plugin.</p>
<h2 id="configure-back-end-menu">Configure back end menu</h2>
<p>As described in <a href="../conf/#define-back-end-menu-items">conf.js documentation</a> you can add a page to the back end.</p>
<p>Open <strong>conf.js</strong> file and add a new back end page.</p>
<pre><code class="js">backOffice: {
  menu: [
    {
      weight: -50,
      label: 'Library',
      subMenu: [
        {
          label: 'Book info',
          path: 'library/bookInfo',
          permission: 'library-access-book-page'
        }
      ]
    }
  ]
}
</code></pre>

<p>We defined a new menu entry for our plugin with <strong>Library</strong> as a label and a sub menu with one item named <strong>Book info</strong> which requires <strong>library-access-book-page</strong> permission to see the page. For now there is nothing being the AngularJS route <strong>library/bookInfo</strong>. Let's create the route.</p>
<h2 id="add-an-angularjs-back-end-route">Add an AngularJS back end route</h2>
<p>As OpenVeo back end is written in AngularJS, each plugin has an AngularJS module to create its back end pages.</p>
<p>Open file <strong>app/client/admin/js/ovLibrary/BookApp.js</strong>. You can see the AngularJS module corresponding to the plugin. Add the new route:</p>
<pre><code class="js">// Add route /library/bookInfo
$routeProvider.when('/library/bookInfo', {
  templateUrl: '/library/be/views/bookInfo.html',
  controller: 'LibraryBookController',
  title: 'Book page title',
  access: 'library-access-book-page',
  resolve: {
    book: ['$q', function($q) {
      var p = $q.defer();
      p.resolve({
        title: 'Journey to the center of the earth',
        summary: 'The story begins in May 1863, in the Lidenbrock house in Hamburg, Germany, with Professor Lidenbrock rushing home to peruse his latest purchase, an original runic manuscript of an Icelandic saga written by Snorri Sturluson (&quot;Heimskringla&quot;; the chronicle of the Norwegian kings who ruled over Iceland).'
      });
      return p.promise;
    }]
  }
});
</code></pre>

<p>We defined a new route <strong>/library/bookInfo</strong> with a template, a controller, a page title and a permission to access the page. Let's create the controller and the template.</p>
<h2 id="add-back-end-page-controller">Add back end page controller</h2>
<p>Create a file <strong>app/client/admin/js/ovLibrary/BookController.js</strong>:</p>
<pre><code class="js">'use strict';

(function(app) {

  /**
   * Defines a book controller.
   */
  function BookController($scope, book) {
    $scope.title = book.title;
    $scope.summary = book.summary;
  }

  app.controller('LibraryBookController', BookController);
  BookController.$inject = ['$scope', 'book'];

})(angular.module('ov.library'));
</code></pre>

<p>Open <a href="../conf/#back-end-scripts">conf.js</a> file and add the newly created file to the list of files to be loaded by OpenVeo:</p>
<pre><code class="js">backOffice: {
  scriptFiles: {
    base: [],
    dev: [
      'ovLibrary/BookController.js'
    ]
  }
}
</code></pre>

<h2 id="add-back-end-page-template">Add back end page template</h2>
<p>Create a file <strong>assert/be/views/bookInfo.html</strong>:</p>
<pre><code class="html">&lt;h1 ng-bind=&quot;title&quot;&gt;&lt;/h1&gt;
&lt;p ng-bind=&quot;summary&quot;&gt;&lt;/p&gt;
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tutorial/" class="btn btn-neutral float-right" title="Tutorial">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../template-engine/" class="btn btn-neutral" title="Template engine"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/veo-labs/openveo-plugin-generator/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../template-engine/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../tutorial/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
